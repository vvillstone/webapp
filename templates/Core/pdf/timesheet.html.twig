<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Feuille de temps - {{ timesheet.employeeName }}</title>
    <style>
        body {
            font-family: 'DejaVu Sans', Arial, sans-serif;
            font-size: 12px;
            line-height: 1.4;
            color: #333;
            margin: 0;
            padding: 20px;
        }
        .header {
            border-bottom: 2px solid #333;
            padding-bottom: 20px;
            margin-bottom: 30px;
        }
        .company-info {
            float: left;
            width: 50%;
        }
        .timesheet-info {
            float: right;
            width: 40%;
            text-align: right;
        }
        .clear {
            clear: both;
        }
        .employee-info {
            margin-bottom: 30px;
        }
        .timesheet-details {
            margin-bottom: 30px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }
        th {
            background-color: #f5f5f5;
            font-weight: bold;
        }
        .text-right {
            text-align: right;
        }
        .text-center {
            text-align: center;
        }
        .total-row {
            font-weight: bold;
            background-color: #f9f9f9;
        }
        .footer {
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid #ddd;
            font-size: 10px;
            color: #666;
        }
        .status-approved {
            color: #28a745;
            font-weight: bold;
        }
        .status-pending {
            color: #ffc107;
            font-weight: bold;
        }
        .status-rejected {
            color: #dc3545;
            font-weight: bold;
        }
        .amount {
            font-family: 'Courier New', monospace;
        }
        .info-grid {
            display: table;
            width: 100%;
            margin-bottom: 20px;
        }
        .info-cell {
            display: table-cell;
            width: 50%;
            vertical-align: top;
            padding: 10px;
        }
        .info-cell:first-child {
            padding-right: 20px;
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="company-info">
            <h2>{{ company.name }}</h2>
            <p>{{ company.address }}</p>
            <p>Tél: {{ company.phone }}</p>
            <p>Email: {{ company.email }}</p>
        </div>
        <div class="timesheet-info">
            <h1>FEUILLE DE TEMPS</h1>
            <p><strong>N° {{ timesheet.id }}</strong></p>
            <p>Date: {{ timesheet.date|date('d/m/Y') }}</p>
            <p>Statut: 
                <span class="status-{{ timesheet.status }}">
                    {% if timesheet.status == 'approved' %}Approuvé
                    {% elseif timesheet.status == 'submitted' %}Soumis
                    {% elseif timesheet.status == 'rejected' %}Rejeté
                    {% else %}Brouillon
                    {% endif %}
                </span>
            </p>
        </div>
        <div class="clear"></div>
    </div>

    <div class="info-grid">
        <div class="info-cell">
            <h3>Employé</h3>
            <p><strong>{{ timesheet.employeeName }}</strong></p>
            <p>Poste: {{ timesheet.employee.position }}</p>
            <p>Département: {{ timesheet.employee.department }}</p>
            <p>Taux horaire: {{ timesheet.hourlyRate|number_format(2, ',', ' ') }} €/h</p>
        </div>
        <div class="info-cell">
            <h3>Site/Client</h3>
            <p><strong>{{ timesheet.siteName }}</strong></p>
            <p>Client: {{ timesheet.clientName }}</p>
            <p>Adresse: {{ timesheet.site.address }}</p>
            <p>{{ timesheet.site.postalCode }} {{ timesheet.site.city }}</p>
        </div>
    </div>

    <div class="timesheet-details">
        <h3>Détails de la journée</h3>
        <table>
            <thead>
                <tr>
                    <th>Heure de début</th>
                    <th>Heure de fin</th>
                    <th>Heures travaillées</th>
                    <th>Tâche</th>
                    <th class="text-right">Montant</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>{{ timesheet.startTime|date('H:i') }}</td>
                    <td>{{ timesheet.endTime ? timesheet.endTime|date('H:i') : '-' }}</td>
                    <td>{{ timesheet.hoursWorked|number_format(2, ',', ' ') }}h</td>
                    <td>{{ timesheet.task ?: '-' }}</td>
                    <td class="text-right amount">{{ timesheet.totalAmount|number_format(2, ',', ' ') }} €</td>
                </tr>
            </tbody>
        </table>
    </div>

    {% if timesheet.description %}
    <div class="description">
        <h3>Description du travail</h3>
        <p>{{ timesheet.description }}</p>
    </div>
    {% endif %}

    <div class="summary">
        <h3>Récapitulatif</h3>
        <table>
            <tbody>
                <tr>
                    <td><strong>Heures travaillées</strong></td>
                    <td class="text-right">{{ timesheet.hoursWorked|number_format(2, ',', ' ') }}h</td>
                </tr>
                <tr>
                    <td><strong>Taux horaire</strong></td>
                    <td class="text-right">{{ timesheet.hourlyRate|number_format(2, ',', ' ') }} €/h</td>
                </tr>
                <tr class="total-row">
                    <td><strong>Total</strong></td>
                    <td class="text-right amount"><strong>{{ timesheet.totalAmount|number_format(2, ',', ' ') }} €</strong></td>
                </tr>
            </tbody>
        </table>
    </div>

    {% if timesheet.notes %}
    <div class="notes">
        <h3>Notes</h3>
        <p>{{ timesheet.notes }}</p>
    </div>
    {% endif %}

    <div class="approval-info">
        <h3>Informations d'approbation</h3>
        <table>
            <tbody>
                <tr>
                    <td><strong>Créé le</strong></td>
                    <td>{{ timesheet.createdAt|date('d/m/Y H:i') }}</td>
                </tr>
                {% if timesheet.submittedAt %}
                <tr>
                    <td><strong>Soumis le</strong></td>
                    <td>{{ timesheet.submittedAt|date('d/m/Y H:i') }}</td>
                </tr>
                {% endif %}
                {% if timesheet.approvedAt %}
                <tr>
                    <td><strong>Approuvé le</strong></td>
                    <td>{{ timesheet.approvedAt|date('d/m/Y H:i') }}</td>
                </tr>
                {% endif %}
                {% if timesheet.updatedAt %}
                <tr>
                    <td><strong>Modifié le</strong></td>
                    <td>{{ timesheet.updatedAt|date('d/m/Y H:i') }}</td>
                </tr>
                {% endif %}
            </tbody>
        </table>
    </div>

    <div class="footer">
        <p><strong>{{ company.name }}</strong> - {{ company.address }}</p>
        <p>Cette feuille de temps est générée automatiquement par le système de gestion.</p>
        <p>Pour toute question, contactez-nous à {{ company.email }}</p>
    </div>
</body>
</html>
